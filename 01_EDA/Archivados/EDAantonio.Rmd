---
title: "EDA Airbnb"
author: "Antonio Fernández Cáceres"
date: "18/11/2021"
output:
  html_document: default
  pdf_document: default
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

### 4. Análisis exploratorio de datos

```{r cuentaAirbnbs}
cuentaABs <- data %>%
  group_by(neighbourhood_group_cleansed) %>%
  summarise(count = n()) %>%
  arrange(-count) %>%
  rename(cuenta = count)

ggplot(cuentaABs, aes(x=reorder(neighbourhood_group_cleansed, -cuenta), y=cuenta)) + geom_bar(stat='identity')
```
Este gráfico revela la inmensa cantidad de AirBnbs que hay en el centro frente al resto de Madrid.


```{r cuentaTipos}

cuentaTipos <- data %>%
  group_by(room_type) %>%
  summarise(count = n()) %>%
  arrange(-count) %>%
  rename(cuenta = count)

ggplot(cuentaTipos, aes(x=reorder(room_type, -cuenta), y=cuenta)) + geom_bar(stat='identity')
```

Hay cuatro tipos de AirBnb: Apartamento completo (mayoría), habitación privada, 

```{r preciosGenerales}
ggplot(data, aes(x= reorder(neighbourhood_group_cleansed, -price), y= price)) +
  geom_bar(stat = "summary", fun = "mean")
```

Esta gráfica no es clara, ya que están mezclados pisos y habitaciones.


```{r preciosPisos}

dataPisos <- data[data$room_type == "Entire home/apt",]
ggplot(dataPisos, aes(x= reorder(neighbourhood_group_cleansed, -price), y= price)) +
  geom_bar(stat = "summary", fun = "mean")
```

```{r preciosHabitaciones}

dataHabs <- data[data$room_type == "Private room",]
ggplot(dataHabs, aes(x= reorder(neighbourhood_group_cleansed, -price), y= price)) +
  geom_bar(stat = "summary", fun = "mean")
```



```{r preciosCanillejas}

dataCanillejasPisos <- data[data$neighbourhood_group_cleansed == "San Blas - Canillejas" & data$room_type == "Entire home/apt",]
dataCanillejasHabs <- data[data$neighbourhood_group_cleansed == "San Blas - Canillejas" & data$room_type == "Private room",]
dataCanillejasPisos$price
dataCanillejasHabs$price
```

Habrá que explorar por qué los pisos son tan caros en Canillejas. ¿Habitaciones para varias personas?


```{r preciosVillaverde}

dataVillaverdePisos <- data[data$neighbourhood_group_cleansed == "Villaverde" & data$room_type == "Entire home/apt",]
dataVillaverdeHabs <- data[data$neighbourhood_group_cleansed == "Villaverde" & data$room_type == "Private room",]
dataVillaverdePisos$price
dataVillaverdeHabs$price
```

Los pisos de Villaverde o son outliers (error o casa de lujo) o son pisos francos XD

```
TODO:
explorar por qué los pisos son tan caros en Canillejas. ¿Habitaciones para varias personas?
Los pisos de Villaverde o son outliers (error o casa de lujo) o son pisos francos XD
```